<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Utilities</title>
<link rel="stylesheet" href="../../../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
<link rel="start" href="../../index.html" title="Chapter&#160;1.&#160;Boost.Log">
<link rel="up" href="../detailed.html" title="Detailed features description">
<link rel="prev" href="attributes.html" title="Attributes">
<link rel="next" href="../extension.html" title="Extending the library">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../boost.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="attributes.html"><img src="../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../detailed.html"><img src="../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="../extension.html"><img src="../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="log.detailed.utilities"></a><a href="utilities.html" title="Utilities"> Utilities</a>
</h3></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="utilities.html#log.detailed.utilities.string_literal"> String literals</a></span></dt>
<dt><span class="section"><a href="utilities.html#log.detailed.utilities.type_info_wrapper"> Type information wrapper</a></span></dt>
<dt><span class="section"><a href="utilities.html#log.detailed.utilities.scoped_attributes"> Scoped attributes</a></span></dt>
<dt><span class="section"><a href="utilities.html#log.detailed.utilities.type_dispatch"> Type dispatchers</a></span></dt>
<dt><span class="section"><a href="utilities.html#log.detailed.utilities.predef_types"> Predefined type sequences</a></span></dt>
<dt><span class="section"><a href="utilities.html#log.detailed.utilities.extractors"> Attribute value extractors</a></span></dt>
<dt><span class="section"><a href="utilities.html#log.detailed.utilities.record_ordering"> Log record ordering</a></span></dt>
<dt><span class="section"><a href="utilities.html#log.detailed.utilities.exception_handlers"> Exception handlers</a></span></dt>
<dt><span class="section"><a href="utilities.html#log.detailed.utilities.init"> Simplified library initialization tools</a></span></dt>
</dl></div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="log.detailed.utilities.string_literal"></a><a href="utilities.html#log.detailed.utilities.string_literal" title="String literals"> String literals</a>
</h4></div></div></div>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">string_literal</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
          String literals are used in several places throughout the library. However, this component can be successfully used outside of the library in users' code. It is header-only and does not require linking with the library binary. String literals can improve performance significantly if there is no need to modify stored strings. What is also important, since string literals do not dynamically allocate memory, it is easier to maintain exception safety when using string literals instead of regular strings.
        </p>
<p>
          The functionality is implemented in the <code class="computeroutput"><span class="identifier">basic_string_literal</span></code> class template, which is parametrized with the character and character traits, similar to <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span></code>. There are also two convenience typedefs provided: <code class="computeroutput"><span class="identifier">string_literal</span></code> and <code class="computeroutput"><span class="identifier">wstring_literal</span></code>, for narrow and wide character types, respectively. In order to ease string literal construction in generic code there is also a <code class="computeroutput"><span class="identifier">str_literal</span></code> function template that accepts a string literal and returns a <code class="computeroutput"><span class="identifier">basic_string_literal</span></code> instance for the appropriate character type.
        </p>
<p>
          String literals support interface similar to STL strings, except for string modification functions. However, it is possible to assign to or clear string literals, as long as only string literals involved. Relational and stream output operators are also supported. More detailed information is given in the <code class="computeroutput"><a href="../../boost/log/basic_string_literal.html" title="Class template basic_string_literal">Reference section</a></code>.
        </p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="log.detailed.utilities.type_info_wrapper"></a><a href="utilities.html#log.detailed.utilities.type_info_wrapper" title="Type information wrapper"> Type information wrapper</a>
</h4></div></div></div>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">type_info_wrapper</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
          The language support for run time type information is essential for the library. But partially because of limitations that the C++ Standard imposes on this feature, partially because of differences of implementation of different compilers, there was a need for a lightweight wrapper around the <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">type_info</span></code> class to fill the gaps. The table below briefly shows the differences between the <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">type_info</span></code> and <code class="computeroutput"><span class="identifier">type_info_wrapper</span></code> classes.
        </p>
<div class="table">
<a name="id410199"></a><p class="title"><b>Table&#160;1.2.&#160;Type information classes comparison</b></p>
<div class="table-contents"><table class="table" summary="Type information classes comparison">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                  <p>
                    Feature
                  </p>
                </th>
<th>
                  <p>
                    <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">type_info</span></code>
                  </p>
                </th>
<th>
                  <p>
                    <code class="computeroutput"><span class="identifier">type_info_wrapper</span></code>
                  </p>
                </th>
</tr></thead>
<tbody>
<tr>
<td>
                  <p>
                    Is default-constructable
                  </p>
                </td>
<td>
                  <p>
                    No
                  </p>
                </td>
<td>
                  <p>
                    Yes. The default-constructed wrapper is in an empty state.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    Is copy-constructable
                  </p>
                </td>
<td>
                  <p>
                    No
                  </p>
                </td>
<td>
                  <p>
                    Yes
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    Is assignable
                  </p>
                </td>
<td>
                  <p>
                    No
                  </p>
                </td>
<td>
                  <p>
                    Yes
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    Is swappable
                  </p>
                </td>
<td>
                  <p>
                    No
                  </p>
                </td>
<td>
                  <p>
                    Yes
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    Life time duration
                  </p>
                </td>
<td>
                  <p>
                    Static, until the application terminates
                  </p>
                </td>
<td>
                  <p>
                    Dynamic
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    Has an empty state
                  </p>
                </td>
<td>
                  <p>
                    No
                  </p>
                </td>
<td>
                  <p>
                    Yes. In empty state the type info wrapper is never equal to other non-empty type info wrappers. It is equal to other empty type info wrappers and can be ordered with them.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    Supports equality comparison
                  </p>
                </td>
<td>
                  <p>
                    Yes
                  </p>
                </td>
<td>
                  <p>
                    Yes
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    Supports ordering
                  </p>
                </td>
<td>
                  <p>
                    Yes, partial ordering with the <code class="computeroutput"><span class="identifier">before</span></code> method.
                  </p>
                </td>
<td>
                  <p>
                    Yes, partial ordering with the complete set of comparison operators. The semantics of ordering is similar to the <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">type_info</span><span class="special">::</span><span class="identifier">before</span></code> method.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    Supports printable representation of type
                  </p>
                </td>
<td>
                  <p>
                    Yes, with the <code class="computeroutput"><span class="identifier">name</span></code> function.
                  </p>
                </td>
<td>
                  <p>
                    Yes, with <code class="computeroutput"><span class="identifier">pretty_name</span></code> function. The function does its best to print the type name in a human-readable form. On some platforms it does better than <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">type_info</span><span class="special">::</span><span class="identifier">name</span></code>.
                  </p>
                </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><p>
          Given the distinctions above, using type information objects becomes much easier. For example, the ability to copy and order with regular operators allows using <code class="computeroutput"><span class="identifier">type_info_wrapper</span></code> with containers. The ability to default-construct and assign allows using type information as a regular object and not to resort to pointers which may be unsafe.
        </p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="log.detailed.utilities.scoped_attributes"></a><a href="utilities.html#log.detailed.utilities.scoped_attributes" title="Scoped attributes"> Scoped attributes</a>
</h4></div></div></div>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">scoped_attribute</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
          Scoped attributes are a powerful mechanism of tagging log records that can be used for different purposes. As the naming implies, scoped attributes are registered in the beginning of a scope and unregistered on the end of the scope. The mechanism includes the following four macros:
        </p>
<pre class="programlisting"><span class="identifier">BOOST_LOG_SCOPED_LOGGER_ATTR</span><span class="special">(</span><span class="identifier">logger</span><span class="special">,</span> <span class="identifier">attr_name</span><span class="special">,</span> <span class="identifier">attr_type</span><span class="special">);</span>
<span class="identifier">BOOST_LOG_SCOPED_LOGGER_ATTR_CTOR</span><span class="special">(</span><span class="identifier">logger</span><span class="special">,</span> <span class="identifier">attr_name</span><span class="special">,</span> <span class="identifier">attr_type</span><span class="special">,</span> <span class="identifier">attr_ctor_args</span><span class="special">);</span>

<span class="identifier">BOOST_LOG_SCOPED_THREAD_ATTR</span><span class="special">(</span><span class="identifier">attr_name</span><span class="special">,</span> <span class="identifier">attr_type</span><span class="special">);</span>
<span class="identifier">BOOST_LOG_SCOPED_THREAD_ATTR_CTOR</span><span class="special">(</span><span class="identifier">attr_name</span><span class="special">,</span> <span class="identifier">attr_type</span><span class="special">,</span> <span class="identifier">attr_ctor_args</span><span class="special">);</span>
</pre>
<p>
          The former two register a source-specific attribute in the <code class="computeroutput"><span class="identifier">logger</span></code> logger object. The attribute name and type are given in the <code class="computeroutput"><span class="identifier">attr_name</span></code> and <code class="computeroutput"><span class="identifier">attr_type</span></code> arguments. The BOOST_LOG_SCOPED_LOGGER_ATTR_CTOR additionally accepts a <a href="http://www.boost.org/doc/libs/release/libs/preprocessor/doc/index.html" target="_top">Boost.Preprocessor</a> sequence of arguments that should be passed to the attribute constructor. The latter pair of macros do exactly the same but the attribute is registered for the current thread in the logging core (which does not require a logger).
        </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../../doc/html/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
            If an attribute with the same name is already registered in the logger/logging core, the macros won't override the existing attribute and will eventually have no effect. See <a href="../rationale/why_weak_scoped_attributes.html" title="Why scoped attributes don't override existing attributes?">Rationale</a> for a more detailed explanation of the reasons for such behavior.
          </p></td></tr>
</table></div>
<p>
          Usage example follows:
        </p>
<pre class="programlisting"><span class="identifier">BOOST_LOG_DECLARE_GLOBAL_LOGGER</span><span class="special">(</span><span class="identifier">my_logger</span><span class="special">,</span> <span class="identifier">src</span><span class="special">::</span><span class="identifier">logger_mt</span><span class="special">)</span>

<span class="keyword">void</span> <span class="identifier">foo</span><span class="special">()</span>
<span class="special">{</span>
    <span class="comment">// This log record will also be marked with the "Tag" attribute,
</span>    <span class="comment">// whenever it is called from the A::bar function.
</span>    <span class="comment">// It will not be marked when called from other places.
</span>    <span class="identifier">BOOST_LOG</span><span class="special">(</span><span class="identifier">get_my_logger</span><span class="special">())</span> <span class="special">&lt;&lt;</span> <span class="string">"A log message from foo"</span><span class="special">;</span>
<span class="special">}</span>

<span class="keyword">struct</span> <span class="identifier">A</span>
<span class="special">{</span>
    <span class="identifier">src</span><span class="special">::</span><span class="identifier">logger</span> <span class="identifier">m_Logger</span><span class="special">;</span>

    <span class="keyword">void</span> <span class="identifier">bar</span><span class="special">()</span>
    <span class="special">{</span>
        <span class="comment">// Set a thread-wide markup tag.
</span>        <span class="comment">// Note the additional parentheses to form a Boost.PP sequence.
</span>        <span class="identifier">BOOST_LOG_SCOPED_THREAD_ATTR_CTOR</span><span class="special">(</span><span class="string">"Tag"</span><span class="special">,</span>
            <span class="identifier">attrs</span><span class="special">::</span><span class="identifier">constant</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&gt;,</span> <span class="special">(</span><span class="string">"Called from A::bar"</span><span class="special">));</span>

        <span class="comment">// This log record will be marked
</span>        <span class="identifier">BOOST_LOG</span><span class="special">(</span><span class="identifier">m_Logger</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="string">"A log message from A::bar"</span><span class="special">;</span>

        <span class="identifier">foo</span><span class="special">();</span>
    <span class="special">}</span>
<span class="special">};</span>

<span class="keyword">int</span> <span class="identifier">main</span><span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">char</span><span class="special">*[])</span>
<span class="special">{</span>
    <span class="identifier">src</span><span class="special">::</span><span class="identifier">logger</span> <span class="identifier">lg</span><span class="special">;</span>

    <span class="comment">// Let's measure our application run time
</span>    <span class="identifier">BOOST_LOG_SCOPED_LOGGER_ATTR</span><span class="special">(</span><span class="identifier">lg</span><span class="special">,</span> <span class="string">"RunTime"</span><span class="special">,</span> <span class="identifier">attrs</span><span class="special">::</span><span class="identifier">timer</span><span class="special">);</span>

    <span class="comment">// Mark application start.
</span>    <span class="comment">// The "RunTime" attribute should be nearly 0 at this point.
</span>    <span class="identifier">BOOST_LOG</span><span class="special">(</span><span class="identifier">lg</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="string">"Application started"</span><span class="special">;</span>

    <span class="comment">// Note that no other log records are affected by the "RunTime" attribute.
</span>    <span class="identifier">foo</span><span class="special">();</span>

    <span class="identifier">A</span> <span class="identifier">a</span><span class="special">;</span>
    <span class="identifier">a</span><span class="special">.</span><span class="identifier">bar</span><span class="special">();</span>

    <span class="comment">// Mark application ending.
</span>    <span class="comment">// The "RunTime" attribute will show the execution time elapsed.
</span>    <span class="identifier">BOOST_LOG</span><span class="special">(</span><span class="identifier">lg</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="string">"Application ended"</span><span class="special">;</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
          It is quite often convenient to mark a group of log records with a constant value in order to be able to filter the records later. The library provides two convenience macros just for this purpose:
        </p>
<pre class="programlisting"><span class="identifier">BOOST_LOG_SCOPED_LOGGER_TAG</span><span class="special">(</span><span class="identifier">logger</span><span class="special">,</span> <span class="identifier">tag_name</span><span class="special">,</span> <span class="identifier">tag_type</span><span class="special">,</span> <span class="identifier">tag_value</span><span class="special">);</span>
<span class="identifier">BOOST_LOG_SCOPED_THREAD_TAG</span><span class="special">(</span><span class="identifier">tag_name</span><span class="special">,</span> <span class="identifier">tag_type</span><span class="special">,</span> <span class="identifier">tag_value</span><span class="special">);</span>
</pre>
<p>
          The macros are effectively wrappers around <code class="computeroutput"><span class="identifier">BOOST_LOG_SCOPED_LOGGER_ATTR_CTOR</span></code> and <code class="computeroutput"><span class="identifier">BOOST_LOG_SCOPED_THREAD_ATTR_CTOR</span></code>, respectively. For example, the "Tag" scoped attribute from the example above can be registered like this:
        </p>
<pre class="programlisting"><span class="comment">// Note there is no "attrs::constant" type wrapping
</span><span class="comment">// and no additional parenthesis around the tag value.
</span><span class="identifier">BOOST_LOG_SCOPED_THREAD_TAG</span><span class="special">(</span><span class="string">"Tag"</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="string">"Called from A::bar"</span><span class="special">);</span>
</pre>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="../../../../../../doc/html/images/warning.png"></td>
<th align="left">Warning</th>
</tr>
<tr><td align="left" valign="top"><p>
            When using scoped attributes, make sure that the scoped attribute is not altered in the attribute set in which it was registered. For example, one should not clear or reinstall the attribute set of the logger if there are logger-specific scoped attributes registered in it. Otherwise the program will likely crash. This issue is especially critical in multithreaded application, when one thread may not know whether there are scoped attributes in the logger or there are not. Future releases may solve this limitation but currently the scoped attribute must remain intact until unregistered on leaving the scope.
          </p></td></tr>
</table></div>
<p>
          Although the described macros are intended to be the primary interface for the functionality, there is also a C++ interface available. It may be useful if the user decides to develop his own macros that cannot be based on the existing ones.
        </p>
<p>
          Any scoped attribute is attached to a generic sentry object of type <code class="computeroutput"><span class="identifier">scoped_attribute</span></code>. As long as the sentry exists, the attribute is registered. There are several functions that create sentries for source or thread-specific attributes:
        </p>
<pre class="programlisting"><span class="comment">// Source-specific scoped attribute registration
</span><span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">typename</span> <span class="identifier">LoggerT</span> <span class="special">&gt;</span>
<span class="special">[</span><span class="identifier">unspecified</span><span class="special">]</span> <span class="identifier">add_scoped_logger_attribute</span><span class="special">(</span>
    <span class="identifier">LoggerT</span><span class="special">&amp;</span> <span class="identifier">l</span><span class="special">,</span>
    <span class="keyword">typename</span> <span class="identifier">LoggerT</span><span class="special">::</span><span class="identifier">string_type</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">name</span><span class="special">,</span>
    <span class="identifier">shared_ptr</span><span class="special">&lt;</span> <span class="identifier">attribute</span> <span class="special">&gt;</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">attr</span><span class="special">);</span>

<span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">typename</span> <span class="identifier">LoggerT</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">AttributeT</span> <span class="special">&gt;</span>
<span class="special">[</span><span class="identifier">unspecified</span><span class="special">]</span> <span class="identifier">add_scoped_logger_attribute</span><span class="special">(</span>
    <span class="identifier">LoggerT</span><span class="special">&amp;</span> <span class="identifier">l</span><span class="special">,</span>
    <span class="keyword">typename</span> <span class="identifier">LoggerT</span><span class="special">::</span><span class="identifier">string_type</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">name</span><span class="special">,</span>
    <span class="identifier">AttributeT</span><span class="special">&amp;</span> <span class="identifier">attr</span><span class="special">);</span>

<span class="comment">// Thread-specific scoped attribute registration
</span><span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">typename</span> <span class="identifier">CharT</span> <span class="special">&gt;</span>
<span class="special">[</span><span class="identifier">unspecified</span><span class="special">]</span> <span class="identifier">add_scoped_thread_attribute</span><span class="special">(</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">name</span><span class="special">,</span>
    <span class="identifier">shared_ptr</span><span class="special">&lt;</span> <span class="identifier">attribute</span> <span class="special">&gt;</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">attr</span><span class="special">);</span>

<span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">typename</span> <span class="identifier">CharT</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">AttributeT</span> <span class="special">&gt;</span>
<span class="special">[</span><span class="identifier">unspecified</span><span class="special">]</span> <span class="identifier">add_scoped_thread_attribute</span><span class="special">(</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">name</span><span class="special">,</span>
    <span class="identifier">AttributeT</span><span class="special">&amp;</span> <span class="identifier">attr</span><span class="special">);</span>
</pre>
<p>
          Please note that the overloads that accept references to the attribute do not control the life time of the attribute. These overloads can be used to temporarily register attributes that reside on stack or are members of a class - in other words, whose life duration is controlled elsewhere.
        </p>
<p>
          An object of the <code class="computeroutput"><span class="identifier">scoped_attribute</span></code> type is able to attach results of each of these functions on its construction. For example, <code class="computeroutput"><span class="identifier">BOOST_LOG_SCOPED_LOGGER_ATTR</span><span class="special">(</span><span class="identifier">lg</span><span class="special">,</span> <span class="string">"RunTime"</span><span class="special">,</span> <span class="identifier">attrs</span><span class="special">::</span><span class="identifier">timer</span><span class="special">)</span></code> can roughly be expanded to this:
        </p>
<pre class="programlisting"><span class="identifier">attrs</span><span class="special">::</span><span class="identifier">timer</span> <span class="identifier">attr</span><span class="special">;</span>
<span class="identifier">attrs</span><span class="special">::</span><span class="identifier">scoped_attribute</span> <span class="identifier">sentry</span> <span class="special">=</span>
    <span class="identifier">attrs</span><span class="special">::</span><span class="identifier">add_scoped_logger_attribute</span><span class="special">(</span><span class="identifier">lg</span><span class="special">,</span> <span class="string">"RunTime"</span><span class="special">,</span> <span class="identifier">attr</span><span class="special">);</span>
</pre>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="log.detailed.utilities.type_dispatch"></a><a href="utilities.html#log.detailed.utilities.type_dispatch" title="Type dispatchers"> Type dispatchers</a>
</h4></div></div></div>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">type_dispatch</span><span class="special">/</span><span class="identifier">type_dispatcher</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
          Type dispatchers are used throughout the library in order to work with attribute values. Dispatchers allow acquiring the actual typed attribute value using the Visitor concept. The most notable places where the functionality is used are filters and formatters. However, this mechanism is orthogonal to attributes and can be used for other purposes as well. Most of the time users won't need to dig into the details of type dispatchers, but this information may be useful for those who intend to extend the library and wants to understand what's under the hood.
        </p>
<p>
          Every type dispatcher supports the <code class="computeroutput"><span class="identifier">type_dispatcher</span></code> interface. When an attribute value needs to be extracted, this interface is passed to the attribute value object, which then tries to acquire the concrete visitor for the actual type of the value. All visitors derive from the appropriate instance of the <code class="computeroutput"><span class="identifier">type_visitor</span></code> class template, instantiated on the actual type of the value. If the dispatcher is able to consume the value of the requested type, it must return the pointer to the appropriate visitor interface. Otherwise it returns <code class="computeroutput"><span class="identifier">NULL</span></code>. When (and if) the corresponding visitor is acquired, the attribute value object only has to pass the contained value to the visitor.
        </p>
<p>
          Happily, there is no need to write type dispatchers from scratch. The library provides two kinds of type dispatchers that implement the <code class="computeroutput"><span class="identifier">type_dispatcher</span></code> and <code class="computeroutput"><span class="identifier">type_visitor</span></code> interfaces and encapsulate the visitor lookup.
        </p>
<a name="log.detailed.utilities.type_dispatch.static_type_dispatcher"></a><h6>
<a name="id412707"></a>
          <a href="utilities.html#log.detailed.utilities.type_dispatch.static_type_dispatcher">Static type dispatcher</a>
        </h6>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">type_dispatch</span><span class="special">/</span><span class="identifier">static_type_dispatcher</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
          Static type dispatchers are used when the set of types that needs to be supported for extraction is known at compile time. The <code class="computeroutput"><span class="identifier">static_type_dispatcher</span></code> class template is parametrized with an MPL type sequence of types that need to be supported. The dispatcher inherits from <code class="computeroutput"><span class="identifier">type_dispatcher</span></code> and <code class="computeroutput"><span class="identifier">type_visitor</span></code> instances for all types in the MPL sequence. All you need to do is derive your class from the dispatcher and implement the <code class="computeroutput"><span class="identifier">visit</span></code> methods for all supported types, like this:
        </p>
<pre class="programlisting"><span class="comment">// A simple attribute value
</span><span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">typename</span> <span class="identifier">T</span> <span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">my_value</span> <span class="special">:</span>
    <span class="keyword">public</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">attribute_value</span>
<span class="special">{</span>
    <span class="identifier">T</span> <span class="identifier">m_Value</span><span class="special">;</span>

    <span class="keyword">explicit</span> <span class="identifier">my_value</span><span class="special">(</span><span class="identifier">T</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">value</span><span class="special">)</span> <span class="special">:</span> <span class="identifier">m_Value</span><span class="special">(</span><span class="identifier">value</span><span class="special">)</span> <span class="special">{}</span>

    <span class="comment">// The function passes the contained type into the dispatcher
</span>    <span class="keyword">bool</span> <span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">logging</span><span class="special">::</span><span class="identifier">type_dispatcher</span><span class="special">&amp;</span> <span class="identifier">dispatcher</span><span class="special">)</span>
    <span class="special">{</span>
        <span class="identifier">logging</span><span class="special">::</span><span class="identifier">type_visitor</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;*</span> <span class="identifier">visitor</span> <span class="special">=</span> <span class="identifier">dispatcher</span><span class="special">.</span><span class="identifier">get_visitor</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;();</span>
        <span class="keyword">if</span> <span class="special">(</span><span class="identifier">visitor</span><span class="special">)</span>
        <span class="special">{</span>
            <span class="identifier">visitor</span><span class="special">-&gt;</span><span class="identifier">visit</span><span class="special">(</span><span class="identifier">m_Value</span><span class="special">);</span>
            <span class="keyword">return</span> <span class="keyword">true</span><span class="special">;</span>
        <span class="special">}</span>
        <span class="keyword">else</span>
            <span class="keyword">return</span> <span class="keyword">false</span><span class="special">;</span>
    <span class="special">}</span>

    <span class="comment">// Other functions omitted for brevity...
</span><span class="special">};</span>

<span class="comment">// Type dispatcher for the supported types
</span><span class="keyword">struct</span> <span class="identifier">my_dispatcher</span> <span class="special">:</span>
    <span class="keyword">public</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">static_type_dispatcher</span><span class="special">&lt;</span>
        <span class="identifier">boost</span><span class="special">::</span><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">,</span> <span class="keyword">double</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&gt;</span>
    <span class="special">&gt;</span>
<span class="special">{</span>
    <span class="comment">// Implement visitation logic for all supported types
</span>    <span class="keyword">void</span> <span class="identifier">visit</span><span class="special">(</span><span class="keyword">int</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">value</span><span class="special">)</span>
    <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Received int value = "</span> <span class="special">&lt;&lt;</span> <span class="identifier">value</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
    <span class="special">}</span>
    <span class="keyword">void</span> <span class="identifier">visit</span><span class="special">(</span><span class="keyword">double</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">value</span><span class="special">)</span>
    <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Received double value = "</span> <span class="special">&lt;&lt;</span> <span class="identifier">value</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
    <span class="special">}</span>
    <span class="keyword">void</span> <span class="identifier">visit</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">value</span><span class="special">)</span>
    <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Received string value = "</span> <span class="special">&lt;&lt;</span> <span class="identifier">value</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
    <span class="special">}</span>
<span class="special">};</span>

<span class="keyword">int</span> <span class="identifier">main</span><span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">char</span><span class="special">*[])</span>
<span class="special">{</span>
    <span class="identifier">my_dispatcher</span> <span class="identifier">disp</span><span class="special">;</span>

    <span class="comment">// These two attributes are supported by the dispatcher
</span>    <span class="identifier">my_value</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&gt;</span> <span class="identifier">val1</span><span class="special">(</span><span class="string">"Hello world!"</span><span class="special">);</span>
    <span class="identifier">assert</span><span class="special">(</span><span class="identifier">val1</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">disp</span><span class="special">));</span>

    <span class="identifier">my_value</span><span class="special">&lt;</span> <span class="keyword">double</span> <span class="special">&gt;</span> <span class="identifier">val2</span><span class="special">(</span><span class="number">1.2</span><span class="special">);</span>
    <span class="identifier">assert</span><span class="special">(</span><span class="identifier">val2</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">disp</span><span class="special">));</span>

    <span class="comment">// This one is not
</span>    <span class="identifier">my_value</span><span class="special">&lt;</span> <span class="keyword">float</span> <span class="special">&gt;</span> <span class="identifier">val3</span><span class="special">(-</span><span class="number">4.3</span><span class="special">);</span>
    <span class="identifier">assert</span><span class="special">(!</span><span class="identifier">val3</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">disp</span><span class="special">));</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<div class="tip"><table border="0" summary="Tip">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="../../../../../../doc/html/images/tip.png"></td>
<th align="left">Tip</th>
</tr>
<tr><td align="left" valign="top"><p>
            In the example above we implemented a reduced attribute value object. Since in most cases this implementation is always the same, the library provides a ready-to-go attribute value in the <code class="computeroutput"><a href="../../attributes.html#header.boost.log.attributes.basic_attribute_value_hpp" title="Header &lt;boost/log/attributes/basic_attribute_value.hpp&gt;">basic_attribute_value.hpp</a></code> file, the <code class="computeroutput"><span class="identifier">basic_attribute_value</span></code> class template.
          </p></td></tr>
</table></div>
<p>
          The static type dispatcher also supports another way of use which allows avoidance of code duplication if values of several types have to be processed in a similar manner. In the example above we wanted to print the dispatched value on the console, whatever it is. The same can be achieved with templated metafunction class which is injected into the dispatcher as a visitor.
        </p>
<pre class="programlisting"><span class="comment">// The templated visitor will be instantiated on every type supported by the dispatcher
</span><span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">typename</span> <span class="identifier">T</span> <span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">my_visitor</span> <span class="special">:</span>
    <span class="keyword">public</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">type_visitor</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;</span>
<span class="special">{</span>
    <span class="keyword">void</span> <span class="identifier">visit</span><span class="special">(</span><span class="identifier">T</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">value</span><span class="special">)</span>
    <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Received "</span> <span class="special">&lt;&lt;</span> <span class="keyword">typeid</span><span class="special">(</span><span class="identifier">T</span><span class="special">).</span><span class="identifier">name</span><span class="special">()</span> <span class="special">&lt;&lt;</span> <span class="string">" value = "</span> <span class="special">&lt;&lt;</span> <span class="identifier">value</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
    <span class="special">}</span>
<span class="special">};</span>

<span class="comment">// Type dispatcher for the supported types
</span><span class="keyword">typedef</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">static_type_dispatcher</span><span class="special">&lt;</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">,</span> <span class="keyword">double</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&gt;,</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">quote1</span><span class="special">&lt;</span> <span class="identifier">my_visitor</span> <span class="special">&gt;</span>
<span class="special">&gt;</span> <span class="identifier">my_dispatcher</span><span class="special">;</span>
</pre>
<p>
          This dispatcher can be used in precisely the same way as the previously defined one. Note also that <a href="http://www.boost.org/doc/libs/release/libs/mpl/doc/index.html" target="_top">Boost.MPL</a> lambda expressions are supported as visitor generators.
        </p>
<div class="tip"><table border="0" summary="Tip">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="../../../../../../doc/html/images/tip.png"></td>
<th align="left">Tip</th>
</tr>
<tr><td align="left" valign="top"><p>
            See also <a href="utilities.html#log.detailed.utilities.extractors" title="Attribute value extractors">attribute value extractors</a> for an even simpler solution if all you want is to get an attribute value.
          </p></td></tr>
</table></div>
<a name="log.detailed.utilities.type_dispatch.dynamic_type_dispatcher"></a><h6>
<a name="id414558"></a>
          <a href="utilities.html#log.detailed.utilities.type_dispatch.dynamic_type_dispatcher">Dynamic type dispatcher</a>
        </h6>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">type_dispatch</span><span class="special">/</span><span class="identifier">dynamic_type_dispatcher</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
          If the set of types that have to be supported is not available at compile time, the <code class="computeroutput"><span class="identifier">dynamic_type_dispatcher</span></code> class is there to help. One can use its <code class="computeroutput"><span class="identifier">register_type</span></code> method to add support for a particular type. The user has to pass a function object along with the type, this functor will be called when a visitor for the specified type is invoked. Considering the <code class="computeroutput"><span class="identifier">my_value</span></code> from the code sample for static type dispatcher is intact, the code can be rewritten as follows:
        </p>
<pre class="programlisting"><span class="comment">// Implement visitation logic for all supported types
</span><span class="keyword">void</span> <span class="identifier">on_int</span><span class="special">(</span><span class="keyword">int</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">value</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Received int value = "</span> <span class="special">&lt;&lt;</span> <span class="identifier">value</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
<span class="special">}</span>
<span class="keyword">void</span> <span class="identifier">on_double</span><span class="special">(</span><span class="keyword">double</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">value</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Received double value = "</span> <span class="special">&lt;&lt;</span> <span class="identifier">value</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
<span class="special">}</span>
<span class="keyword">void</span> <span class="identifier">on_string</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">value</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Received string value = "</span> <span class="special">&lt;&lt;</span> <span class="identifier">value</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
<span class="special">}</span>

<span class="keyword">int</span> <span class="identifier">main</span><span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">char</span><span class="special">*[])</span>
<span class="special">{</span>
    <span class="identifier">logging</span><span class="special">::</span><span class="identifier">dynamic_type_dispatcher</span> <span class="identifier">disp</span><span class="special">;</span>

    <span class="comment">// Register type visitors
</span>    <span class="identifier">disp</span><span class="special">.</span><span class="identifier">register_type</span><span class="special">&lt;</span> <span class="keyword">int</span> <span class="special">&gt;(&amp;</span><span class="identifier">on_int</span><span class="special">);</span>
    <span class="identifier">disp</span><span class="special">.</span><span class="identifier">register_type</span><span class="special">&lt;</span> <span class="keyword">double</span> <span class="special">&gt;(&amp;</span><span class="identifier">on_double</span><span class="special">);</span>
    <span class="identifier">disp</span><span class="special">.</span><span class="identifier">register_type</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&gt;(&amp;</span><span class="identifier">on_string</span><span class="special">);</span>

    <span class="comment">// These two attributes are supported by the dispatcher
</span>    <span class="identifier">my_value</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&gt;</span> <span class="identifier">val1</span><span class="special">(</span><span class="string">"Hello world!"</span><span class="special">);</span>
    <span class="identifier">assert</span><span class="special">(</span><span class="identifier">val1</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">disp</span><span class="special">));</span>

    <span class="identifier">my_value</span><span class="special">&lt;</span> <span class="keyword">double</span> <span class="special">&gt;</span> <span class="identifier">val2</span><span class="special">(</span><span class="number">1.2</span><span class="special">);</span>
    <span class="identifier">assert</span><span class="special">(</span><span class="identifier">val2</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">disp</span><span class="special">));</span>

    <span class="comment">// This one is not
</span>    <span class="identifier">my_value</span><span class="special">&lt;</span> <span class="keyword">float</span> <span class="special">&gt;</span> <span class="identifier">val3</span><span class="special">(-</span><span class="number">4.3</span><span class="special">);</span>
    <span class="identifier">assert</span><span class="special">(!</span><span class="identifier">val3</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">disp</span><span class="special">));</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
          Of course, complex function objects, like those provided by <a href="http://www.boost.org/doc/libs/release/libs/bind/bind.html" target="_top">Boost.Bind</a>, are also supported.
        </p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="log.detailed.utilities.predef_types"></a><a href="utilities.html#log.detailed.utilities.predef_types" title="Predefined type sequences"> Predefined type sequences</a>
</h4></div></div></div>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">type_dispatch</span><span class="special">/</span><span class="identifier">standard_types</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">type_dispatch</span><span class="special">/</span><span class="identifier">date_time_types</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
          One may notice that when using type dispatchers and defining filters and formatters it may be convenient to have some predefined type sequences to designate frequently used sets of types. The library provides several such sets.
        </p>
<div class="table">
<a name="id415687"></a><p class="title"><b>Table&#160;1.3.&#160;Standard types (standard_types.hpp)</b></p>
<div class="table-contents"><table class="table" summary="Standard types (standard_types.hpp)">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                  <p>
                    Type sequence
                  </p>
                </th>
<th>
                  <p>
                    Meaning
                  </p>
                </th>
</tr></thead>
<tbody>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">integral_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    All integral types, including <code class="computeroutput"><span class="keyword">bool</span></code>, character and 64 bit integral types, if available
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">floating_point_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    Floating point types
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">numeric_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    Includes <code class="computeroutput"><span class="identifier">integral_types</span></code> and <code class="computeroutput"><span class="identifier">floating_point_types</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">string_types</span></code> and <code class="computeroutput"><span class="identifier">wstring_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    Narrow or wide string types. Currently only includes STL string types and <a href="utilities.html#log.detailed.utilities.string_literal" title="String literals">string literals</a>.
                  </p>
                </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><p>
          There are also a number of time-related type sequences available:
        </p>
<div class="table">
<a name="id415885"></a><p class="title"><b>Table&#160;1.4.&#160;Time-related types (date_time_types.hpp)</b></p>
<div class="table-contents"><table class="table" summary="Time-related types (date_time_types.hpp)">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                  <p>
                    Type sequence
                  </p>
                </th>
<th>
                  <p>
                    Meaning
                  </p>
                </th>
</tr></thead>
<tbody>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">native_date_time_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    All types defined in C/C++ standard that have both date and time portions
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">boost_date_time_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    All types defined in <a href="http://www.boost.org/doc/libs/release/doc/html/date_time.html" target="_top">Boost.DateTime</a> that have both date and time portions
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">date_time_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    Includes <code class="computeroutput"><span class="identifier">native_date_time_types</span></code> and <code class="computeroutput"><span class="identifier">boost_date_time_types</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">native_date_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    All types defined in C/C++ standard that have date portion. Currently equivalent to <code class="computeroutput"><span class="identifier">native_date_time_types</span></code>.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">boost_date_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    All types defined in <a href="http://www.boost.org/doc/libs/release/doc/html/date_time.html" target="_top">Boost.DateTime</a> that have date portion
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">date_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    Includes <code class="computeroutput"><span class="identifier">native_date_types</span></code> and <code class="computeroutput"><span class="identifier">boost_date_types</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">native_time_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    All types defined in C/C++ standard that have time portion. Currently equivalent to <code class="computeroutput"><span class="identifier">native_date_time_types</span></code>.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">boost_time_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    All types defined in <a href="http://www.boost.org/doc/libs/release/doc/html/date_time.html" target="_top">Boost.DateTime</a> that have time portion. Currently equivalent to <code class="computeroutput"><span class="identifier">boost_date_time_types</span></code>.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">time_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    Includes <code class="computeroutput"><span class="identifier">native_time_types</span></code> and <code class="computeroutput"><span class="identifier">boost_time_types</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">native_time_duration_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    All types defined in C/C++ standard that are used to represent time duration. Currently only includes <code class="computeroutput"><span class="keyword">double</span></code>, as the result type of the <code class="computeroutput"><span class="identifier">difftime</span></code> standard function.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">boost_time_duration_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    All time duration types defined in <a href="http://www.boost.org/doc/libs/release/doc/html/date_time.html" target="_top">Boost.DateTime</a>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">time_duration_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    Includes <code class="computeroutput"><span class="identifier">native_time_duration_types</span></code> and <code class="computeroutput"><span class="identifier">boost_time_duration_types</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">boost_time_period_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    All time period types defined in <a href="http://www.boost.org/doc/libs/release/doc/html/date_time.html" target="_top">Boost.DateTime</a>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">time_period_types</span></code>
                  </p>
                </td>
<td>
                  <p>
                    Currently equivalent to <code class="computeroutput"><span class="identifier">boost_time_period_types</span></code>
                  </p>
                </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break">
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="log.detailed.utilities.extractors"></a><a href="utilities.html#log.detailed.utilities.extractors" title="Attribute value extractors"> Attribute value extractors</a>
</h4></div></div></div>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">attribute_value_extractor</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
          Attribute value extractors serve as a helper tool on top of <a href="utilities.html#log.detailed.utilities.type_dispatch" title="Type dispatchers">type dispatchers</a> in order to simplify extracting attribute values in generic code. The functionality is implemented in the <code class="computeroutput"><span class="identifier">attribute_value_extractor</span></code> class template, parametrized on character type and type or MPL sequence of types that have to be supported for dispatch. The <code class="computeroutput"><span class="identifier">attribute_value_extractor</span></code> instance is a binary function object that accepts a set of attribute values and another function object that will receive the extracted attribute value. The name of the attribute to be extracted is given as the constructor argument to the extractor. The key advantage of using extractors instead of raw dispatchers is that the receiving function object can have a template <code class="computeroutput"><span class="keyword">operator</span> <span class="special">()</span></code>. Obviously, this allows reducing the amount of code when similar processing is needed for attributes of different types. For example:
        </p>
<pre class="programlisting"><span class="comment">// A generic function object that outputs attribute value
</span><span class="keyword">struct</span> <span class="identifier">print_attribute_value</span>
<span class="special">{</span>
    <span class="keyword">typedef</span> <span class="keyword">void</span> <span class="identifier">result_type</span><span class="special">;</span>

    <span class="comment">// This operator will be instantiated for all possible types of the attribute value
</span>    <span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">typename</span> <span class="identifier">T</span> <span class="special">&gt;</span>
    <span class="keyword">void</span> <span class="keyword">operator</span><span class="special">()</span> <span class="special">(</span><span class="identifier">T</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">value</span><span class="special">)</span> <span class="keyword">const</span>
    <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Received "</span> <span class="special">&lt;&lt;</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">type_info_wrapper</span><span class="special">(</span><span class="keyword">typeid</span><span class="special">(</span><span class="identifier">T</span><span class="special">)).</span><span class="identifier">pretty_name</span><span class="special">()</span>
            <span class="special">&lt;&lt;</span> <span class="string">" attribute value: "</span> <span class="special">&lt;&lt;</span> <span class="identifier">value</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
    <span class="special">}</span>
<span class="special">};</span>

<span class="keyword">void</span> <span class="identifier">foo</span><span class="special">(</span><span class="identifier">attribute_values_view</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">attrs</span><span class="special">)</span>
<span class="special">{</span>
    <span class="comment">// Let's assume we want to output the value of the
</span>    <span class="comment">// attribute "MyAttr" that may have any numeric type
</span>    <span class="identifier">logging</span><span class="special">::</span><span class="identifier">attribute_value_extractor</span><span class="special">&lt;</span> <span class="keyword">char</span><span class="special">,</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">numeric_types</span> <span class="special">&gt;</span> <span class="identifier">extractor1</span><span class="special">(</span><span class="string">"MyAttr"</span><span class="special">);</span>
    <span class="identifier">assert</span><span class="special">(</span><span class="identifier">extractor1</span><span class="special">(</span><span class="identifier">attrs</span><span class="special">,</span> <span class="identifier">print_attribute_value</span><span class="special">()));</span>

    <span class="comment">// The extractor returns false if it is unable to extract the value
</span>    <span class="identifier">logging</span><span class="special">::</span><span class="identifier">attribute_value_extractor</span><span class="special">&lt;</span> <span class="keyword">char</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">complex</span><span class="special">&lt;</span> <span class="keyword">double</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">extractor2</span><span class="special">(</span><span class="string">"MyAttr"</span><span class="special">);</span>
    <span class="identifier">assert</span><span class="special">(!</span><span class="identifier">extractor2</span><span class="special">(</span><span class="identifier">attrs</span><span class="special">,</span> <span class="identifier">print_attribute_value</span><span class="special">()));</span>
<span class="special">}</span>
</pre>
<p>
          Note that the predefined type sequences provided by the library can be used freely with extractors just as well as with filters and formatters. Also note that specifying a single type of the attribute value instead of type sequence is also perfectly valid.
        </p>
<p>
          The library also provides an <code class="computeroutput"><span class="identifier">extract</span></code> convenience function that automatically creates extractor object. The <code class="computeroutput"><span class="identifier">foo</span></code> function from the example above can be rewritten like this:
        </p>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">foo</span><span class="special">(</span><span class="identifier">attribute_values_view</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">attrs</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">assert</span><span class="special">(</span><span class="identifier">extract</span><span class="special">&lt;</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">numeric_types</span> <span class="special">&gt;(</span><span class="string">"MyAttr"</span><span class="special">,</span> <span class="identifier">attrs</span><span class="special">,</span> <span class="identifier">print_attribute_value</span><span class="special">()));</span>
    <span class="identifier">assert</span><span class="special">(!</span><span class="identifier">extract</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">complex</span><span class="special">&lt;</span> <span class="keyword">double</span> <span class="special">&gt;</span> <span class="special">&gt;(</span><span class="string">"MyAttr"</span><span class="special">,</span> <span class="identifier">attrs</span><span class="special">,</span> <span class="identifier">print_attribute_value</span><span class="special">()));</span>
<span class="special">}</span>
</pre>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="log.detailed.utilities.record_ordering"></a><a href="utilities.html#log.detailed.utilities.record_ordering" title="Log record ordering"> Log record ordering</a>
</h4></div></div></div>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">record_ordering</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
          There are cases when log records need to be ordered. One possible use case is storing records in a container or a priority queue. The library provides two types of record ordering predicates out of the box:
        </p>
<a name="log.detailed.utilities.record_ordering.opaque_handle_ordering"></a><h6>
<a name="id417521"></a>
          <a href="utilities.html#log.detailed.utilities.record_ordering.opaque_handle_ordering">Opaque handle ordering</a>
        </h6>
<p>
          The <code class="computeroutput"><span class="identifier">handle_ordering</span></code> class allows application of a quick opaque ordering. The result of this ordering is not stable between different runs of the application, however it provides the best performance. The <code class="computeroutput"><span class="identifier">handle_ordering</span></code> is a template that is specialized with an optional predicate function that will be able to compare <code class="computeroutput"><span class="keyword">void</span><span class="special">*</span></code> pointers. By default a <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">less</span></code> equivalent is used.
        </p>
<pre class="programlisting"><span class="comment">// A set of unique records
</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">set</span><span class="special">&lt;</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">record</span><span class="special">,</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">handle_ordering</span><span class="special">&lt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">m_Records</span><span class="special">;</span>
</pre>
<a name="log.detailed.utilities.record_ordering.attribute_value_based_ordering"></a><h6>
<a name="id417692"></a>
          <a href="utilities.html#log.detailed.utilities.record_ordering.attribute_value_based_ordering">Attribute value based ordering</a>
        </h6>
<p>
          This kind of ordering is implemented with the <code class="computeroutput"><span class="identifier">attribute_value_ordering</span></code> class and is based on the attribute values attached to the record. The predicate will seek for an attribute value with the specified name in both records being ordered and attempt to compare the attribute values.
        </p>
<pre class="programlisting"><span class="comment">// Ordering type definition
</span><span class="keyword">typedef</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">attribute_value_ordering</span><span class="special">&lt;</span>
    <span class="keyword">char</span><span class="special">,</span>   <span class="comment">// character type that is used by Boost.Log
</span>    <span class="keyword">int</span>     <span class="comment">// attribute value type
</span><span class="special">&gt;</span> <span class="identifier">ordering</span><span class="special">;</span>

<span class="comment">// Records organized into a queue based on the "Severity" attribute value
</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">priority_queue</span><span class="special">&lt;</span>
    <span class="identifier">logging</span><span class="special">::</span><span class="identifier">record</span><span class="special">,</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">record</span> <span class="special">&gt;,</span>
    <span class="identifier">ordering</span>
<span class="special">&gt;</span> <span class="identifier">m_Records</span><span class="special">(</span><span class="identifier">ordering</span><span class="special">(</span><span class="string">"Severity"</span><span class="special">));</span>
</pre>
<p>
          Like the <code class="computeroutput"><span class="identifier">handle_ordering</span></code>, <code class="computeroutput"><span class="identifier">attribute_value_ordering</span></code> also accepts the third optional template parameter, which should be the predicate to compare attribute values (<code class="computeroutput"><span class="keyword">int</span></code>s in the example above). By default, a <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">less</span></code> equivalent is used.
        </p>
<p>
          You can also use the <code class="computeroutput"><span class="identifier">make_attr_ordering</span></code> generator function to automatically generate the <code class="computeroutput"><span class="identifier">attribute_value_ordering</span></code> instance based on the attribute value name and the ordering function. This might be useful if the ordering function has a non-trivial type, like the ones <a href="http://www.boost.org/doc/libs/release/libs/bind/bind.html" target="_top">Boost.Bind</a> provides.
        </p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="log.detailed.utilities.exception_handlers"></a><a href="utilities.html#log.detailed.utilities.exception_handlers" title="Exception handlers"> Exception handlers</a>
</h4></div></div></div>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">exception_handler</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
          The library provides exception handling hooks in different places. Tools, defined in this header, provide an easy way of implementing function objects suitable for such hooks.
        </p>
<p>
          An exception handler is a function object that accepts no arguments. The result of the exception handler is ignored and thus should generally be <code class="computeroutput"><span class="keyword">void</span></code>. Exception handlers are called from within <code class="computeroutput"><span class="keyword">catch</span></code> sections by the library, therefore in order to reacquire the exception object it has to rethrow it. The header defines an <code class="computeroutput"><span class="identifier">exception_handler</span></code> template functor that does just that and then forwards the exception object to an unary user-defined functional object. The <code class="computeroutput"><span class="identifier">make_exception_handler</span></code> function can be used to simplify the handler construction. All expected exception types should be specified explicitly in the call, in the order they would appear in the <code class="computeroutput"><span class="keyword">catch</span></code> sections (i.e. from most specific ones to the most general ones).
        </p>
<pre class="programlisting"><span class="keyword">struct</span> <span class="identifier">my_handler</span>
<span class="special">{</span>
    <span class="keyword">typedef</span> <span class="keyword">void</span> <span class="identifier">result_type</span><span class="special">;</span>

    <span class="keyword">void</span> <span class="keyword">operator</span><span class="special">()</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">runtime_error</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="keyword">const</span>
    <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"std::runtime_error: "</span> <span class="special">&lt;&lt;</span> <span class="identifier">e</span><span class="special">.</span><span class="identifier">what</span><span class="special">()</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
    <span class="special">}</span>
    <span class="keyword">void</span> <span class="keyword">operator</span><span class="special">()</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">logic_error</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="keyword">const</span>
    <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"std::logic_error: "</span> <span class="special">&lt;&lt;</span> <span class="identifier">e</span><span class="special">.</span><span class="identifier">what</span><span class="special">()</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
        <span class="keyword">throw</span><span class="special">;</span>
    <span class="special">}</span>
<span class="special">};</span>

<span class="keyword">void</span> <span class="identifier">init_logging</span><span class="special">()</span>
<span class="special">{</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_ptr</span><span class="special">&lt;</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">core</span> <span class="special">&gt;</span> <span class="identifier">core</span> <span class="special">=</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">core</span><span class="special">::</span><span class="identifier">get</span><span class="special">();</span>

    <span class="comment">// Setup a global exception handler that will call my_handler::operator()
</span>    <span class="comment">// for the specified exception types
</span>    <span class="identifier">core</span><span class="special">-&gt;</span><span class="identifier">set_exception_handler</span><span class="special">(</span><span class="identifier">logging</span><span class="special">::</span><span class="identifier">make_exception_handler</span><span class="special">&lt;</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">runtime_error</span><span class="special">,</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">logic_error</span>
    <span class="special">&gt;(</span><span class="identifier">my_handler</span><span class="special">()));</span>
<span class="special">}</span>
</pre>
<p>
          As you can see, you can either suppress the exception by returning normally from <code class="computeroutput"><span class="keyword">operator</span><span class="special">()</span></code> in the user-defined handler functor, or rethrow the exception, in which case it will propagate further. If it appears that the exception handler is invoked for an exception type that cannot be caught by any of the specified types, the exception will be propagated without any processing. In order to catch such situations, there exists the <code class="computeroutput"><span class="identifier">nothrow_exception_handler</span></code> class. It invokes the user-defined functor with no arguments if it cannot determine the exception type.
        </p>
<pre class="programlisting"><span class="keyword">struct</span> <span class="identifier">my_handler</span>
<span class="special">{</span>
    <span class="keyword">typedef</span> <span class="keyword">void</span> <span class="identifier">result_type</span><span class="special">;</span>

    <span class="keyword">void</span> <span class="keyword">operator</span><span class="special">()</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">runtime_error</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="keyword">const</span>
    <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"std::runtime_error: "</span> <span class="special">&lt;&lt;</span> <span class="identifier">e</span><span class="special">.</span><span class="identifier">what</span><span class="special">()</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
    <span class="special">}</span>
    <span class="keyword">void</span> <span class="keyword">operator</span><span class="special">()</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">logic_error</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="keyword">const</span>
    <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"std::logic_error: "</span> <span class="special">&lt;&lt;</span> <span class="identifier">e</span><span class="special">.</span><span class="identifier">what</span><span class="special">()</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
        <span class="keyword">throw</span><span class="special">;</span>
    <span class="special">}</span>
    <span class="keyword">void</span> <span class="keyword">operator</span><span class="special">()</span> <span class="special">()</span> <span class="keyword">const</span>
    <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"unknown exception"</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
    <span class="special">}</span>
<span class="special">};</span>

<span class="keyword">void</span> <span class="identifier">init_logging</span><span class="special">()</span>
<span class="special">{</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_ptr</span><span class="special">&lt;</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">core</span> <span class="special">&gt;</span> <span class="identifier">core</span> <span class="special">=</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">core</span><span class="special">::</span><span class="identifier">get</span><span class="special">();</span>

    <span class="comment">// Setup a global exception handler that will call my_handler::operator()
</span>    <span class="comment">// for the specified exception types. Note the std::nothrow argument that
</span>    <span class="comment">// specifies that all other exceptions should also be passed to the functor.
</span>    <span class="identifier">core</span><span class="special">-&gt;</span><span class="identifier">set_exception_handler</span><span class="special">(</span><span class="identifier">logging</span><span class="special">::</span><span class="identifier">make_exception_handler</span><span class="special">&lt;</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">runtime_error</span><span class="special">,</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">logic_error</span>
    <span class="special">&gt;(</span><span class="identifier">my_handler</span><span class="special">(),</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">nothrow</span><span class="special">));</span>
<span class="special">}</span>
</pre>
<p>
          It is sometimes convenient to completely suppress all exceptions at a certain library level. The <code class="computeroutput"><span class="identifier">make_exception_suppressor</span></code> function creates an exception handler that simply does nothing upon exception being caught. For example, this way we can disable all exceptions from the logging library:
        </p>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">init_logging</span><span class="special">()</span>
<span class="special">{</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_ptr</span><span class="special">&lt;</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">core</span> <span class="special">&gt;</span> <span class="identifier">core</span> <span class="special">=</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">core</span><span class="special">::</span><span class="identifier">get</span><span class="special">();</span>

    <span class="comment">// Disable all exceptions
</span>    <span class="identifier">core</span><span class="special">-&gt;</span><span class="identifier">set_exception_handler</span><span class="special">(</span><span class="identifier">logging</span><span class="special">::</span><span class="identifier">make_exception_suppressor</span><span class="special">());</span>
<span class="special">}</span>
</pre>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="log.detailed.utilities.init"></a><a href="utilities.html#log.detailed.utilities.init" title="Simplified library initialization tools"> Simplified library initialization tools</a>
</h4></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="utilities.html#log.detailed.utilities.init.convenience"> Convenience functions</a></span></dt>
<dt><span class="section"><a href="utilities.html#log.detailed.utilities.init.filter_formatter"> Filter and formatter parsers</a></span></dt>
<dt><span class="section"><a href="utilities.html#log.detailed.utilities.init.settings"> Library initialization from a settings container</a></span></dt>
<dt><span class="section"><a href="utilities.html#log.detailed.utilities.init.settings_file"> Library initialization from a settings file</a></span></dt>
</dl></div>
<p>
          This part of the library is provided in order to simplify logging initialization and provide basic tools to develop user-specific initialization mechanisms. It is known that setup capabilities and preferences may vary widely from application to application, therefore the library does not attempt to provide a universal solution for this task. The provided tools are mostly intended to serve as a quick drop-in support for logging setup and a set of instruments to implement something more elaborate and more fitting users' needs.
        </p>
<p>
          Some of the features described in this section will require the separate library binary, with name based on "boost_log_setup" substring. This binary depends on the main library binary.
        </p>
<div class="section" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="log.detailed.utilities.init.convenience"></a><a href="utilities.html#log.detailed.utilities.init.convenience" title="Convenience functions"> Convenience functions</a>
</h5></div></div></div>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">init</span><span class="special">/</span><span class="identifier">to_console</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">init</span><span class="special">/</span><span class="identifier">to_file</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">init</span><span class="special">/</span><span class="identifier">common_attributes</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
            The library provides a number of functions that simplify some common initialization procedures, like sink and commonly used attributes registration. This is not much functionality. However, it saves a couple of minutes of learning the library for a newcomer.
          </p>
<p>
            Logging to the application console is the simplest way to see the logging library in action. To achieve this, one can initialize the library with a single function call, like this:
          </p>
<pre class="programlisting"><span class="keyword">int</span> <span class="identifier">main</span><span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">char</span><span class="special">*[])</span>
<span class="special">{</span>
    <span class="comment">// Initialize logging to std::clog
</span>    <span class="identifier">logging</span><span class="special">::</span><span class="identifier">init_log_to_console</span><span class="special">();</span>

    <span class="comment">// Here we go, we can write logs right away
</span>    <span class="identifier">src</span><span class="special">::</span><span class="identifier">logger</span> <span class="identifier">lg</span><span class="special">;</span>
    <span class="identifier">BOOST_LOG</span><span class="special">(</span><span class="identifier">lg</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="string">"Hello world!"</span><span class="special">;</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
            Pretty easy, isn't it? There is <code class="computeroutput"><span class="identifier">winit_log_to_console</span></code> function for wide-character logging. If you want to put logs to some other standard stream, you can pass the stream to the <code class="computeroutput"><span class="identifier">init_log_to_console</span></code> function as an argument. E.g. enabling logging to <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span></code> instead of <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">clog</span></code> would look like this:
          </p>
<pre class="programlisting"><span class="identifier">logging</span><span class="special">::</span><span class="identifier">init_log_to_console</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span><span class="special">);</span>
</pre>
<p>
            What's important, is that you can further manage the console sink if you save the <code class="computeroutput"><span class="identifier">shared_ptr</span></code> to the sink that this function returns. This allows you to set up things like filter, formatter and auto-flush flag.
          </p>
<pre class="programlisting"><span class="keyword">int</span> <span class="identifier">main</span><span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">char</span><span class="special">*[])</span>
<span class="special">{</span>
    <span class="comment">// Initialize logging to std::clog
</span>    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_ptr</span><span class="special">&lt;</span>
        <span class="identifier">sinks</span><span class="special">::</span><span class="identifier">synchronous_sink</span><span class="special">&lt;</span> <span class="identifier">sinks</span><span class="special">::</span><span class="identifier">text_ostream_backend</span> <span class="special">&gt;</span>
    <span class="special">&gt;</span> <span class="identifier">sink</span> <span class="special">=</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">init_log_to_console</span><span class="special">();</span>

    <span class="identifier">sink</span><span class="special">-&gt;</span><span class="identifier">set_filter</span><span class="special">(</span><span class="identifier">flt</span><span class="special">::</span><span class="identifier">attr</span><span class="special">&lt;</span> <span class="keyword">int</span> <span class="special">&gt;(</span><span class="string">"Severity"</span><span class="special">)</span> <span class="special">&gt;=</span> <span class="number">3</span><span class="special">);</span>
    <span class="identifier">sink</span><span class="special">-&gt;</span><span class="identifier">locked_backend</span><span class="special">()-&gt;</span><span class="identifier">auto_flush</span><span class="special">(</span><span class="keyword">true</span><span class="special">);</span>

    <span class="comment">// Here we go, we can write logs right away
</span>    <span class="identifier">src</span><span class="special">::</span><span class="identifier">logger</span> <span class="identifier">lg</span><span class="special">;</span>
    <span class="identifier">BOOST_LOG</span><span class="special">(</span><span class="identifier">lg</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="string">"Hello world!"</span><span class="special">;</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
            Similarly to console, one can use a single function call to enable logging to a file. All you have to do is to provide the file name:
          </p>
<pre class="programlisting"><span class="keyword">int</span> <span class="identifier">main</span><span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">char</span><span class="special">*[])</span>
<span class="special">{</span>
    <span class="comment">// Initialize logging to the "test.log" file
</span>    <span class="identifier">logging</span><span class="special">::</span><span class="identifier">init_log_to_file</span><span class="special">(</span><span class="string">"test.log"</span><span class="special">);</span>

    <span class="comment">// Here we go, we can write logs right away
</span>    <span class="identifier">src</span><span class="special">::</span><span class="identifier">logger</span> <span class="identifier">lg</span><span class="special">;</span>
    <span class="identifier">BOOST_LOG</span><span class="special">(</span><span class="identifier">lg</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="string">"Hello world!"</span><span class="special">;</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
            Like with <code class="computeroutput"><span class="identifier">init_log_to_console</span></code>, the <code class="computeroutput"><span class="identifier">init_log_to_file</span></code> function has its wide-character counterpart <code class="computeroutput"><span class="identifier">winit_log_to_file</span></code> and returns the <code class="computeroutput"><span class="identifier">shared_ptr</span></code> to the registered sink. The functions do not conflict and may be combined freely, so it is possible to set up logging to the console and a couple of files, including filtering and formatting, in about 10 lines of code.
          </p>
<p>
            Lastly, there is an <code class="computeroutput"><span class="identifier">add_common_attributes</span></code> function that registers two frequently used attributes: "LineID" and "TimeStamp". The former counts log record being made and has attribute value <code class="computeroutput"><span class="keyword">unsigned</span> <span class="keyword">int</span></code>. The latter, as its name implies, provides the current time for each log record, in the form of <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">posix_time</span><span class="special">::</span><span class="identifier">ptime</span></code> (see <a href="http://www.boost.org/doc/libs/release/doc/html/date_time.html" target="_top">Boost.DateTime</a>). These two attributes are registered globally, so they will remain available in all threads and loggers. This makes the final version of our code sample look something like this:
          </p>
<pre class="programlisting"><span class="keyword">int</span> <span class="identifier">main</span><span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">char</span><span class="special">*[])</span>
<span class="special">{</span>
    <span class="comment">// Initialize sinks
</span>    <span class="identifier">logging</span><span class="special">::</span><span class="identifier">init_log_to_console</span><span class="special">()-&gt;</span><span class="identifier">set_filter</span><span class="special">(</span><span class="identifier">flt</span><span class="special">::</span><span class="identifier">attr</span><span class="special">&lt;</span> <span class="keyword">int</span> <span class="special">&gt;(</span><span class="string">"Severity"</span><span class="special">)</span> <span class="special">&gt;=</span> <span class="number">4</span><span class="special">);</span>

    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">function</span><span class="special">&lt;</span> <span class="keyword">void</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">ostream</span><span class="special">&amp;,</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">record</span> <span class="keyword">const</span><span class="special">&amp;)</span> <span class="special">&gt;</span> <span class="identifier">formatter</span> <span class="special">=</span>
        <span class="identifier">fmt</span><span class="special">::</span><span class="identifier">stream</span>
            <span class="special">&lt;&lt;</span> <span class="identifier">fmt</span><span class="special">::</span><span class="identifier">attr</span><span class="special">&lt;</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="special">&gt;(</span><span class="string">"LineID"</span><span class="special">,</span> <span class="string">"[% 9u] "</span><span class="special">)</span>
            <span class="special">&lt;&lt;</span> <span class="identifier">fmt</span><span class="special">::</span><span class="identifier">date_time</span><span class="special">&lt;</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">posix_time</span><span class="special">::</span><span class="identifier">ptime</span> <span class="special">&gt;(</span><span class="string">"TimeStamp"</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="string">" *"</span>
            <span class="special">&lt;&lt;</span> <span class="identifier">fmt</span><span class="special">::</span><span class="identifier">attr</span><span class="special">&lt;</span> <span class="keyword">int</span> <span class="special">&gt;(</span><span class="string">"Severity"</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="string">"* "</span> <span class="special">&lt;&lt;</span> <span class="identifier">fmt</span><span class="special">::</span><span class="identifier">message</span><span class="special">();</span>

    <span class="identifier">logging</span><span class="special">::</span><span class="identifier">init_log_to_file</span><span class="special">(</span><span class="string">"complete.log"</span><span class="special">)-&gt;</span><span class="identifier">locked_backend</span><span class="special">()-&gt;</span><span class="identifier">set_formatter</span><span class="special">(</span><span class="identifier">formatter</span><span class="special">);</span>

    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_ptr</span><span class="special">&lt;</span>
        <span class="identifier">sinks</span><span class="special">::</span><span class="identifier">synchronous_sink</span><span class="special">&lt;</span> <span class="identifier">sinks</span><span class="special">::</span><span class="identifier">text_ostream_backend</span> <span class="special">&gt;</span>
    <span class="special">&gt;</span> <span class="identifier">sink</span> <span class="special">=</span> <span class="identifier">logging</span><span class="special">::</span><span class="identifier">init_log_to_file</span><span class="special">(</span><span class="string">"essential.log"</span><span class="special">);</span>
    <span class="identifier">sink</span><span class="special">-&gt;</span><span class="identifier">locked_backend</span><span class="special">()-&gt;</span><span class="identifier">set_formatter</span><span class="special">(</span><span class="identifier">formatter</span><span class="special">);</span>
    <span class="identifier">sink</span><span class="special">-&gt;</span><span class="identifier">set_filter</span><span class="special">(</span><span class="identifier">flt</span><span class="special">::</span><span class="identifier">attr</span><span class="special">&lt;</span> <span class="keyword">int</span> <span class="special">&gt;(</span><span class="string">"Severity"</span><span class="special">)</span> <span class="special">&gt;=</span> <span class="number">1</span><span class="special">);</span>

    <span class="comment">// Register common attributes
</span>    <span class="identifier">logging</span><span class="special">::</span><span class="identifier">add_common_attributes</span><span class="special">();</span>

    <span class="comment">// Here we go, we can write logs
</span>    <span class="identifier">src</span><span class="special">::</span><span class="identifier">logger</span> <span class="identifier">lg</span><span class="special">;</span>
    <span class="identifier">BOOST_LOG</span><span class="special">(</span><span class="identifier">lg</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="string">"Hello world!"</span><span class="special">;</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="log.detailed.utilities.init.filter_formatter"></a><a href="utilities.html#log.detailed.utilities.init.filter_formatter" title="Filter and formatter parsers"> Filter and formatter parsers</a>
</h5></div></div></div>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">init</span><span class="special">/</span><span class="identifier">filter_parser</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">init</span><span class="special">/</span><span class="identifier">formatter_parser</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
            Filter and formatter parsers allow constructing filters and formatters from a descriptive string. The function <code class="computeroutput"><span class="identifier">parse_filter</span></code> is responsible for recognizing filters and <code class="computeroutput"><span class="identifier">parse_formatter</span></code> - for recognizing formatters.
          </p>
<p>
            In the case of filters the string is formed of a sequence of condition expressions, interconnected with boolean operations. There are two operations supported: conjunction (designated as "&amp;" or "and") and disjunction ("|" or "or"). Each condition itself may be either a single condition or a sub-filter, taken in round brackets. Each condition can be negated with the "!" sign or "not" keyword. The condition, if it's not a sub-filter, usually consists of an attribute name enclosed in percent characters ("%"), a relation keyword and an operand. The relation and operand may be omitted, in which case the condition is assumed to be the requirement of the attribute presence (with any type).
          </p>
<pre class="programlisting">filter:
    condition { op condition }

op:
    &amp;
    and
    |
    or

condition:
    !condition
    not condition
    (filter)
    %attribute_name%
    %attribute_name% relation operand

relation:
    &gt;
    &lt;
    =
    !=
    &gt;=
    &lt;=
    begins_with
    ends_with
    contains
    matches
</pre>
<p>
            Below are some examples of filters:
          </p>
<div class="table">
<a name="id421811"></a><p class="title"><b>Table&#160;1.5.&#160;Examples of filters</b></p>
<div class="table-contents"><table class="table" summary="Examples of filters">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                    <p>
                      Filter string
                    </p>
                  </th>
<th>
                    <p>
                      Description
                    </p>
                  </th>
</tr></thead>
<tbody>
<tr>
<td>
                    <p>
                      <code class="computeroutput"><span class="special">%</span><span class="identifier">Severity</span><span class="special">%</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      The filter returns <code class="computeroutput"><span class="keyword">true</span></code> if an attribute value with name "Severity" is found in a log record.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      <code class="computeroutput"><span class="special">%</span><span class="identifier">Severity</span><span class="special">%</span> <span class="special">&gt;</span> <span class="number">3</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      The filter returns <code class="computeroutput"><span class="keyword">true</span></code> if an attribute value with name "Severity" is found and it is greater than 3. The attribute value must be of one of the <a href="utilities.html#log.detailed.utilities.predef_types" title="Predefined type sequences">integral types</a>.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      !(<code class="computeroutput"><span class="special">%</span><span class="identifier">Ratio</span><span class="special">%</span> <span class="special">&gt;</span> <span class="number">0.0</span> <span class="special">&amp;</span> <span class="special">%</span><span class="identifier">Ratio</span><span class="special">%</span> <span class="special">&lt;=</span> <span class="number">0.5</span><span class="special">)</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      The filter returns <code class="computeroutput"><span class="keyword">true</span></code> if an attribute value with name "Ratio" of one of the <a href="utilities.html#log.detailed.utilities.predef_types" title="Predefined type sequences">floating point types</a> is not found or it is not between 0 and 0.5.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      <code class="computeroutput"><span class="special">%</span><span class="identifier">Tag</span><span class="special">%</span> <span class="identifier">contains</span> <span class="string">"net"</span> <span class="keyword">or</span> <span class="special">%</span><span class="identifier">Tag</span><span class="special">%</span> <span class="identifier">contains</span> <span class="string">"io"</span> <span class="keyword">and</span> <span class="keyword">not</span> <span class="special">%</span><span class="identifier">StatFlow</span><span class="special">%</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      The filter returns <code class="computeroutput"><span class="keyword">true</span></code> if an attribute value with name "Tag" is found and contains words "net" or "io" and if an attribute value "StatFlow" is not found. The "Tag" attribute value must be of one of the <a href="utilities.html#log.detailed.utilities.predef_types" title="Predefined type sequences">string types</a>, the "StatFlow" attribute value type is not considered.
                    </p>
                  </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><p>
            The formatter string syntax is even simpler and pretty much resembles <a href="http://www.boost.org/doc/libs/release/libs/format/index.html" target="_top">Boost.Format</a> format string syntax. The string must contain attribute names enclosed in percent signs ("%"), the corresponding attribute value will replace these placeholders. The placeholder "%_%" is special, it will be replaced with the log record text. For instance, <code class="computeroutput"><span class="special">[%</span><span class="identifier">TimeStamp</span><span class="special">%]</span> <span class="special">*%</span><span class="identifier">Severity</span><span class="special">%*</span> <span class="special">%</span><span class="identifier">_</span><span class="special">%</span></code> formatter string will make log records look like this: <code class="computeroutput"><span class="special">[</span><span class="number">2008</span><span class="special">-</span><span class="number">07</span><span class="special">-</span><span class="number">05</span> <span class="number">13</span><span class="special">:</span><span class="number">44</span><span class="special">:</span><span class="number">23</span><span class="special">]</span> <span class="special">*</span><span class="number">0</span><span class="special">*</span> <span class="identifier">Hello</span> <span class="identifier">world</span></code>.
          </p>
<p>
            It must be noted, though, that by default the library only supports those attribute value types <a href="utilities.html#log.detailed.utilities.predef_types" title="Predefined type sequences">which are known</a> at the library build time. User-defined types will not work properly in parsed filters and formatters until registered in the library. More on this is available in the <a href="../extension/settings.html" title="Extending library settings support">Extending the library</a> section.
          </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../../doc/html/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              The parsed formatters and filters are generally less optimal than the equivalent ones written in code. This is because of two reasons: (*) the programmer usually knows more about types of the attribute values that may be involved in formatting or filtering and (*) the compiler has a better chance to optimize the formatter or filter if it is known in compile time. Therefore, if the performance matters, it is advised to avoid parsed filters and formatters.
            </p></td></tr>
</table></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="log.detailed.utilities.init.settings"></a><a href="utilities.html#log.detailed.utilities.init.settings" title="Library initialization from a settings container"> Library initialization from a settings container</a>
</h5></div></div></div>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">init</span><span class="special">/</span><span class="identifier">from_settings</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
            The header defines components for library initialization from settings container. The settings container is basically a set of named parameters divided into sections. The container is implemented with the <code class="computeroutput"><span class="identifier">basic_settings</span></code> class template. There are several constraints on how parameters are stored in the container:
          </p>
<div class="itemizedlist"><ul type="disc">
<li>
              Every parameter must reside in a section. There can be no parameters that do not belong to a section.

            </li>
<li>
              Parameters must have names unique within the section they belong to. Parameters from different sections may have the same name.

            </li>
<li>
              Sections cannot nest. Only one layer of sections is permitted.

            </li>
<li>
              Sections must have names unique throughout the whole container.

            </li>
</ul></div>
<p>
            So basically, settings container is a two-layer associative container, with two string keys. The parameter values are stored as <a href="http://www.boost.org/doc/libs/release/doc/html/any.html" target="_top">Boost.Any</a> values. Each parameter supported by the library must have the according type within the <code class="computeroutput"><span class="identifier">any</span></code> variant value. The supported parameters, their types and meaning is described below.
          </p>
<div class="tip"><table border="0" summary="Tip">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="../../../../../../doc/html/images/tip.png"></td>
<th align="left">Tip</th>
</tr>
<tr><td align="left" valign="top"><p>
              In the tables below, the <code class="computeroutput"><span class="identifier">CharT</span></code> type denotes the character type that is used with the library.
            </p></td></tr>
</table></div>
<div class="table">
<a name="id422531"></a><p class="title"><b>Table&#160;1.6.&#160;Section "Core". Logging core settings.</b></p>
<div class="table-contents"><table class="table" summary='Section "Core". Logging core settings.'>
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                    <p>
                      Parameter
                    </p>
                  </th>
<th>
                    <p>
                      Type
                    </p>
                  </th>
<th>
                    <p>
                      Description
                    </p>
                  </th>
</tr></thead>
<tbody>
<tr>
<td>
                    <p>
                      Filter
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span></code> or <code class="computeroutput"><span class="identifier">basic_core</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;::</span><span class="identifier">filter_type</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      Global filter to be installed to the core. If specified in string form, it should conform to the rules described <a href="utilities.html#log.detailed.utilities.init.filter_formatter" title="Filter and formatter parsers">here</a>. If not specified, the global filter is not set.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      DisableLogging
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="keyword">bool</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      If <code class="computeroutput"><span class="keyword">true</span></code>, results in calling <code class="computeroutput"><span class="identifier">set_logging_enabled</span><span class="special">(</span><span class="keyword">false</span><span class="special">)</span></code> on the core. By default, value <code class="computeroutput"><span class="keyword">false</span></code> is assumed.
                    </p>
                  </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><p>
            Sink settings are divided into separate sections - one section for each sink. The section names should begin with the "Sink:" prefix, while the rest of the section name should denote a user-defined sink name. For example, "Sink:MyFile".
          </p>
<div class="table">
<a name="id422760"></a><p class="title"><b>Table&#160;1.7.&#160;Sections with names beginning with "Sink:". Common sink settings.</b></p>
<div class="table-contents"><table class="table" summary='Sections with names beginning with "Sink:". Common sink settings.'>
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                    <p>
                      Parameter
                    </p>
                  </th>
<th>
                    <p>
                      Type
                    </p>
                  </th>
<th>
                    <p>
                      Description
                    </p>
                  </th>
</tr></thead>
<tbody>
<tr>
<td>
                    <p>
                      Destination
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      Sink backend type. Mandatory parameter. May have one of these values: <a href="sink_backends.html#log.detailed.sink_backends.text_ostream" title="Text stream backend">Console</a>, <a href="sink_backends.html#log.detailed.sink_backends.text_file" title="Text file backend">TextFile</a>, <a href="sink_backends.html#log.detailed.sink_backends.syslog" title="Syslog backend">Syslog</a>. On Windows the following values are additionally supported: <a href="sink_backends.html#log.detailed.sink_backends.event_log" title="Windows event log backends">SimpleEventLog</a>, <a href="sink_backends.html#log.detailed.sink_backends.debugger" title="Windows debugger output backend">Debugger</a>. Also, user-defined sink names may also be supported if registered by calling <code class="computeroutput"><span class="identifier">register_sink_factory</span></code>.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      Filter
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span></code> or <code class="computeroutput"><span class="identifier">sink</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;::</span><span class="identifier">filter_type</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      Sink-specific filter. If specified in string form, it should conform to the rules described <a href="utilities.html#log.detailed.utilities.init.filter_formatter" title="Filter and formatter parsers">here</a>. If not specified, the filter is not set.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      Asynchronous
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="keyword">bool</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      If <code class="computeroutput"><span class="keyword">true</span></code>, the <a href="sink_frontends.html#log.detailed.sink_frontends.async" title="Asynchronous sink frontend">asynchronous sink frontend</a> will be used. Otherwise the <a href="sink_frontends.html#log.detailed.sink_frontends.sync" title="Synchronous sink frontend">synchronous sink frontend</a> will be used. By default, value <code class="computeroutput"><span class="keyword">false</span></code> is assumed. In single-threaded builds this parameter is not used, as <a href="sink_frontends.html#log.detailed.sink_frontends.unlocked" title="Unlocked sink frontend">unlocked sink frontend</a> is always used.
                    </p>
                  </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><p>
            Besides the common settings that all sinks support, some sink backends also accept a number of specific parameters. These parameters should be specified in the same section.
          </p>
<div class="table">
<a name="id423091"></a><p class="title"><b>Table&#160;1.8.&#160;"Console" sink settings</b></p>
<div class="table-contents"><table class="table" summary='"Console" sink settings'>
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                    <p>
                      Parameter
                    </p>
                  </th>
<th>
                    <p>
                      Type
                    </p>
                  </th>
<th>
                    <p>
                      Description
                    </p>
                  </th>
</tr></thead>
<tbody>
<tr>
<td>
                    <p>
                      Formatter
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span></code> or <code class="computeroutput"><span class="identifier">basic_text_ostream_backend</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;::</span><span class="identifier">formatter_type</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      Log record formatter to be used by the sink. If specified in string form, it should conform to the rules described <a href="utilities.html#log.detailed.utilities.init.filter_formatter" title="Filter and formatter parsers">here</a>. If not specified, the default formatter is used.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      AutoFlush
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="keyword">bool</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      Enables or disables the auto-flush feature of the backend. If not specified, the default value <code class="computeroutput"><span class="keyword">false</span></code> is assumed.
                    </p>
                  </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><div class="table">
<a name="id423279"></a><p class="title"><b>Table&#160;1.9.&#160;"TextFile" sink settings</b></p>
<div class="table-contents"><table class="table" summary='"TextFile" sink settings'>
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                    <p>
                      Parameter
                    </p>
                  </th>
<th>
                    <p>
                      Type
                    </p>
                  </th>
<th>
                    <p>
                      Description
                    </p>
                  </th>
</tr></thead>
<tbody>
<tr>
<td>
                    <p>
                      FileName
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span></code> or <code class="computeroutput"><span class="identifier">filesystem</span><span class="special">::</span><span class="identifier">basic_path</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      The file name pattern for the sink backend. This parameter is mandatory.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      Formatter
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span></code> or <code class="computeroutput"><span class="identifier">basic_text_file_backend</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;::</span><span class="identifier">formatter_type</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      Log record formatter to be used by the sink. If specified in string form, it should conform to the rules described <a href="utilities.html#log.detailed.utilities.init.filter_formatter" title="Filter and formatter parsers">here</a>. If not specified, the default formatter is used.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      AutoFlush
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="keyword">bool</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      Enables or disables the auto-flush feature of the backend. If not specified, the default value <code class="computeroutput"><span class="keyword">false</span></code> is assumed.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      RotationSize
                    </p>
                  </td>
<td>
                    <p>
                      Any fundamental integer type
                    </p>
                  </td>
<td>
                    <p>
                      File size, in bytes, upon which file rotation will be performed. If not specified, no size-based rotation will be made.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      RotationInterval
                    </p>
                  </td>
<td>
                    <p>
                      Any fundamental integer type
                    </p>
                  </td>
<td>
                    <p>
                      Time interval, in seconds, upon which file rotation will be performed. See also the RotationTimePoint parameter and the note below.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      RotationTimePoint
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span></code> or <code class="computeroutput"><span class="identifier">sinks</span><span class="special">::</span><span class="identifier">basic_text_file_backend</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;::</span><span class="identifier">time_based_rotation_predicate</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      Time point or a predicate that detects at what moment of time to perform log file rotation. See also the RotationInterval parameter and the note below.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      Target
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span></code> or <code class="computeroutput"><span class="identifier">filesystem</span><span class="special">::</span><span class="identifier">basic_path</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      Target directory name, in which the rotated files will be stored. If this parameter is specified, rotated file collection is enabled. Otherwise the feature is not enabled, and all corresponding parameters are ignored.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      MaxSize
                    </p>
                  </td>
<td>
                    <p>
                      Any fundamental integer type
                    </p>
                  </td>
<td>
                    <p>
                      Total size of files in the target directory, in bytes, upon which the oldest file will be deleted. If not specified, no size-based file cleanup will be performed.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      MinFreeSpace
                    </p>
                  </td>
<td>
                    <p>
                      Any fundamental integer type
                    </p>
                  </td>
<td>
                    <p>
                      Minimum free space in the target directory, in bytes, upon which the oldest file will be deleted. If not specified, no space-based file cleanup will be performed.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      ScanForFiles
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span></code> or <code class="computeroutput"><span class="identifier">sinks</span><span class="special">::</span><span class="identifier">file</span><span class="special">::</span><span class="identifier">scan_method</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      Mode of scanning for old files in the target directory. If specified in string form, the following values are permitted: "All", "Matching". If not specified, no scanning will be performed.
                    </p>
                  </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><p>
            The time-based rotation can be set up with one of the two parameters: RotationInterval or RotationTimePoint. Not more than one of these parameters should be specified for a given sink. If none is specified, no time-based rotation will be performed.
          </p>
<p>
            The RotationTimePoint can be specified in two forms: a predicate or a string. The predicate form is convenient if the settings container is filled by the user's code. In this case, the predicate should take no arguments and return <code class="computeroutput"><span class="keyword">bool</span></code>, which is <code class="computeroutput"><span class="keyword">true</span></code> when the file rotation should take place. A good example of such predicate is the <code class="computeroutput"><span class="identifier">rotation_at_time_point</span></code> class, which is described in <a href="sink_backends.html#log.detailed.sink_backends.text_file" title="Text file backend">this</a> section.
          </p>
<p>
            If the parameter is supplied in the string form, it should have one of the following formats, according to the <a href="http://www.boost.org/doc/libs/release/doc/html/date_time/date_time_io.html#date_time.format_flags" target="_top">Boost.DateTime</a> format notation:
          </p>
<div class="itemizedlist"><ul type="disc">
<li>
              "%H:%M:%S". In this case, file rotation will be performed on a daily basis, at the specified time. For example, "12:00:00".

            </li>
<li>
              "%a %H:%M:%S" or "%A %H:%M:%S". File rotation takes place every week, on the weekday specified in the long or short form, at the specified time. For example, "Saturday 09:00:00".

            </li>
<li>
              "%d %H:%M:%S". File rotation takes place every month, on the specified day of month, at the specified time. For example, "01 23:30:00".

            </li>
</ul></div>
<p>
            In case if the settings are loaded from a <a href="utilities.html#log.detailed.utilities.init.settings_file" title="Library initialization from a settings file">settings file</a>, the string form is the only way to set up the file rotation at a certain time point.
          </p>
<div class="table">
<a name="id424042"></a><p class="title"><b>Table&#160;1.10.&#160;"Syslog" sink settings</b></p>
<div class="table-contents"><table class="table" summary='"Syslog" sink settings'>
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                    <p>
                      Parameter
                    </p>
                  </th>
<th>
                    <p>
                      Type
                    </p>
                  </th>
<th>
                    <p>
                      Description
                    </p>
                  </th>
</tr></thead>
<tbody>
<tr>
<td>
                    <p>
                      LocalAddress
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span></code> or <code class="computeroutput"><span class="identifier">asio</span><span class="special">::</span><span class="identifier">ip_address</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      Local address to initiate connection to the syslog server. If not specified, the default local address will be used.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      TargetAddress
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span></code> or <code class="computeroutput"><span class="identifier">asio</span><span class="special">::</span><span class="identifier">ip_address</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      Remote address of the syslog server. If not specified, the local address will be used.
                    </p>
                  </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><div class="table">
<a name="id424244"></a><p class="title"><b>Table&#160;1.11.&#160;"SimpleEventLog" sink settings</b></p>
<div class="table-contents"><table class="table" summary='"SimpleEventLog" sink settings'>
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                    <p>
                      Parameter
                    </p>
                  </th>
<th>
                    <p>
                      Type
                    </p>
                  </th>
<th>
                    <p>
                      Description
                    </p>
                  </th>
</tr></thead>
<tbody>
<tr>
<td>
                    <p>
                      LogName
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      Log name to write events into. If not specified, the default log name will be used.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      LogSource
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      Log source to write events from. If not specified, the default source will be used.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      Registration
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span><span class="special">&lt;</span> <span class="identifier">CharT</span> <span class="special">&gt;</span></code> or <code class="computeroutput"><span class="identifier">sinks</span><span class="special">::</span><span class="identifier">event_log</span><span class="special">::</span><span class="identifier">registration_mode</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      Mode of log source registration in Windows registry. If specified in string form, the following values are supported: "Never", "OnDemand", "Forced". If not specified, on-demand registration will be performed.
                    </p>
                  </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><p>
            The user is free to fill the settings container from whatever settings source he needs. The usage example is below:
          </p>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">init_logging</span><span class="special">()</span>
<span class="special">{</span>
    <span class="identifier">logging</span><span class="special">::</span><span class="identifier">settings</span> <span class="identifier">setts</span><span class="special">;</span>

    <span class="identifier">setts</span><span class="special">[</span><span class="string">"Core"</span><span class="special">][</span><span class="string">"Filter"</span><span class="special">]</span> <span class="special">=</span> <span class="string">"%Severity% &gt;= warning"</span><span class="special">;</span>
    <span class="identifier">setts</span><span class="special">[</span><span class="string">"Core"</span><span class="special">][</span><span class="string">"DisableLogging"</span><span class="special">]</span> <span class="special">=</span> <span class="keyword">false</span><span class="special">;</span>

    <span class="identifier">setts</span><span class="special">[</span><span class="string">"Sink:Console"</span><span class="special">][</span><span class="string">"Destination"</span><span class="special">]</span> <span class="special">=</span> <span class="string">"Console"</span><span class="special">;</span>
    <span class="identifier">setts</span><span class="special">[</span><span class="string">"Sink:Console"</span><span class="special">][</span><span class="string">"Filter"</span><span class="special">]</span> <span class="special">=</span> <span class="string">"%Severity% &gt;= fatal"</span><span class="special">;</span>
    <span class="identifier">setts</span><span class="special">[</span><span class="string">"Sink:Console"</span><span class="special">][</span><span class="string">"AutoFlush"</span><span class="special">]</span> <span class="special">=</span> <span class="keyword">true</span><span class="special">;</span>

    <span class="identifier">setts</span><span class="special">[</span><span class="string">"Sink:File"</span><span class="special">][</span><span class="string">"Destination"</span><span class="special">]</span> <span class="special">=</span> <span class="string">"TextFile"</span><span class="special">;</span>
    <span class="identifier">setts</span><span class="special">[</span><span class="string">"Sink:File"</span><span class="special">][</span><span class="string">"FileName"</span><span class="special">]</span> <span class="special">=</span> <span class="string">"MyApp_%3N.log"</span><span class="special">;</span>
    <span class="identifier">setts</span><span class="special">[</span><span class="string">"Sink:File"</span><span class="special">][</span><span class="string">"AutoFlush"</span><span class="special">]</span> <span class="special">=</span> <span class="keyword">true</span><span class="special">;</span>
    <span class="identifier">setts</span><span class="special">[</span><span class="string">"Sink:File"</span><span class="special">][</span><span class="string">"RotationSize"</span><span class="special">]</span> <span class="special">=</span> <span class="number">10</span> <span class="special">*</span> <span class="number">1024</span> <span class="special">*</span> <span class="number">1024</span><span class="special">;</span> <span class="comment">// 10 MiB
</span>
    <span class="identifier">logging</span><span class="special">::</span><span class="identifier">init_from_settings</span><span class="special">(</span><span class="identifier">setts</span><span class="special">);</span>
<span class="special">}</span>
</pre>
<p>
            The settings reader also allows to be extended to support custom sink types. See the <a href="../extension/settings.html" title="Extending library settings support">Extending the library</a> section for more information.
          </p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="log.detailed.utilities.init.settings_file"></a><a href="utilities.html#log.detailed.utilities.init.settings_file" title="Library initialization from a settings file"> Library initialization from a settings file</a>
</h5></div></div></div>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">log</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">init</span><span class="special">/</span><span class="identifier">from_stream</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
            Support for configuration files is a frequently requested feature of the library. And despite the fact there is no ultimately convenient and flexible format of the library settings, the library provides preliminary support for this feature. The functionality is implemented with a simple function <code class="computeroutput"><span class="identifier">init_from_stream</span></code>, which accepts an STL input stream and reads the library settings from it. The function then passes on the read settings to the <code class="computeroutput"><span class="identifier">init_from_settings</span></code> function, described <a href="utilities.html#log.detailed.utilities.init.settings" title="Library initialization from a settings container">above</a>. Therefore the parameter names and their meaning is the same as for the <code class="computeroutput"><span class="identifier">init_from_settings</span></code> function.
          </p>
<p>
            The settings format is quite simple and widely used. Below is the description of syntax and parameters.
          </p>
<pre class="programlisting"># Comments are allowed. Comment line begins with the '#' character
# and spans until the end of the line.

# Logging core settings section. May be omitted if no parameters specified within it.
[Core]
DisableLogging=false
Filter="%Severity% &gt; 3"

# Sink settings sections
[Sink:MySink1]

# Sink destination type
Destination=Console

# Sink-specific filter. Optional, by default no filter is applied.
Filter="%Target% contains "MySink1""

# Formatter string. Optional, by default only log record message text is written.
Format="&lt;%TimeStamp%&gt; - %_%"

# The flag shows whether the sink should be asynchronous
Asynchronous=false

# Enables automatic stream flush after each log record.
AutoFlush=true
</pre>
<p>
            Here's the usage example:
          </p>
<pre class="programlisting"><span class="keyword">int</span> <span class="identifier">main</span><span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">char</span><span class="special">*[])</span>
<span class="special">{</span>
    <span class="comment">// Read logging settings from a file
</span>    <span class="identifier">std</span><span class="special">::</span><span class="identifier">ifstream</span> <span class="identifier">file</span><span class="special">(</span><span class="string">"settings.ini"</span><span class="special">);</span>
    <span class="identifier">logging</span><span class="special">::</span><span class="identifier">init_from_stream</span><span class="special">(</span><span class="identifier">file</span><span class="special">);</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2007 , 2008, 2009, 2010 Andrey Semashev<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>).
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="attributes.html"><img src="../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../detailed.html"><img src="../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="../extension.html"><img src="../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
